<!doctype html>
<html>
<head>
  <script src='../../protocut/base.js'></script>
  <script src='../../protocut/dom.js'></script>
  <script src='../../protocut/ajax.js'></script>
  <script src='../../protocut/misc.js'></script>
  <script src="../../PageSpanner/PageSpanner.js"></script>
  <script src="../../DomCascade/protocut/dom-cascade.js"></script>
  <script src="page_creation.js"></script>
  <script>
  // Polyfill for headless browsers that don't implement bind
  Function.prototype.bind = Function.prototype.bind || function ( self ) { var fn = this; return function () { return fn.apply( self, arguments ) } };
  </script>
  <script src="dist/chartist.js"></script>   
  <script src="chart_stuff.js"></script>
  <script>
  function go() {
    new Ajax( "config.json", { onComplete: go2 } );
  }
  var config;
  function go2( response ) {
    config = JSON.parse( response.transport.responseText );
    new Ajax( "out.json", { onComplete: go3 } );
  }
  
  function go3( response ) {
    var out = JSON.parse( response.transport.responseText );
    var spanner = new PageSpanner( {
      tables: out.tables,
      page_tpl_generator: make_page
    }, out );
    spanner.add_pages( config.pages );
    spanner.fillToc();
  }
  </script>
  <style>
  @import url('dist/chartist.min.css');
  @import url('toc.css');
  @import url('render.css');
  </style>
</head>
<body onload='go()'>
</body>
</html>